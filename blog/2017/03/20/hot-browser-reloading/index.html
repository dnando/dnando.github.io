
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hot Browser Reloading With Browsersync - Nando @ Aria Media</title>
  <meta name="author" content="Nando @ Aria Media">

  
  <meta name="description" content="I&rsquo;ve fallen down the rabbit hole of front end development in the last few weeks, and in that time Flexbox CSS, Bootstrap v4, Foundation, Sass &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dnando.github.io/blog/2017/03/20/hot-browser-reloading">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Nando @ Aria Media" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Oxygen:400,300,700' rel='stylesheet' type='text/css'>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Nando @ Aria Media</a></h1>
  
    <h2>( learning Clojure ColdFusion Lucee Javascript jQuery Angular CSS Linux Apache HTML5 & etc )</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dnando.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="http://aria-media.com/">Aria Media</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Hot Browser Reloading With Browsersync</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2017-03-20T00:06:28+01:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>12:06 am</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://dnando.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&rsquo;ve fallen down the rabbit hole of front end development in the last few weeks, and in that time <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">Flexbox CSS</a>, <a href="http://blog.getbootstrap.com/2017/01/06/bootstrap-4-alpha-6/">Bootstrap v4</a>, <a href="http://foundation.zurb.com/">Foundation</a>, <a href="http://sass-lang.com/guide">Sass / SCSS</a>, and <a href="http://gulpjs.com/">Gulp</a> have all whizzed by as I&rsquo;ve taught myself portions of each, and today I landed at the bottom, <a href="https://www.browsersync.io/">Browsersync</a>.</p>

<p>In a nutshell, Browsersync will live reload one or more browsers for you whenever your project&rsquo;s files change. It will also live reload external devices pointed at the same web application. This allows you to simultaneously and efficiently test a responsive design in multiple browsers, phones and tablets - without needing to touch or reload any of them. It also synchronizes form entries and clicks across browsers and devices. For example, with my phone and tablet connected to Browsersync, I log into the app I&rsquo;m developing on the tablet, and my keystrokes and touch gestures are replicated on the phone, and I&rsquo;m logged in on both. Then I start navigating in the application in Chrome on my desktop, and the phone, tablet and other browsers follow as &ldquo;slaves&rdquo;. Interacting with any interface causes the rest of them to follow. What an incredible tool! In the few minutes I&rsquo;ve been experimenting with it, I was able to easily and quickly fix a layout issue on the tablet and phone for the login screen.</p>

<p>Browsersync works by wrapping your application or website in its own Node server process, on another port. You can start Browsersync on the command line, or via a Grunt or Gulp task. During startup, you specify the local url of your app, the files you want it to watch - a number of other options are possible - and then a browser window opens, on port 3000 by default, and browsersync is activated for that browser. To add others, you simply use the same url. To add external devices, on localhost:3001 there is an admin panel for Browsersync that will list the external url to use. Navigate to that external url on your phone or tablet or another computer, for me it currently <a href="http://192.168.1.103:3000/,">http://192.168.1.103:3000/,</a> and Browsersync is set up on these devices as well. Once you have it configured, it is really simple to use.</p>

<p>A quick overview on installation and configuration: Basic instructions are on the homepage <a href="https://www.browsersync.io/.">https://www.browsersync.io/.</a></p>

<ol>
<li>Install or upgrade Node.js</li>
<li>Install Browsersync using npm</li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install -g browser-sync</span></code></pre></td></tr></table></div></figure>


<p>The -g flag means global so it is available from anywhere.</p>

<ol>
<li>Start Browsersync</li>
</ol>


<p>There are 2 start modes, &ndash;server and &ndash;proxy. <em>server</em> is for static files, <em>proxy</em> is for applications running on a server. Here&rsquo;s a simplified example starting Browsersync from the command line:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>browser-sync start --proxy "myproject.dev" --files "css/*.css"</span></code></pre></td></tr></table></div></figure>


<p>&hellip; assuming you have your local host file set up to point your app at myproject.dev. Or you can also start Browsersync using a localhost:port url, like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>browser-sync start --proxy "localhost:8500/myproject" --files "css/*.css"</span></code></pre></td></tr></table></div></figure>


<p>There are a few real world ways to do this, but what I&rsquo;ve done is to create a gulpfile.js in the root of my project so I can configure Browsersync conveniently and start it with a simple gulp command after cd&#8217;ing in to my project directory. That way I don&rsquo;t have to remember much. Here&rsquo;s my first working gulpfile.js for a real development scenario. I have ACF (Adobe ColdFusion) installed on port 8501 on my dev laptop, and  gulp.watch() is configured for an FW/1 app. I&rsquo;m not sure if I actually want to watch the controllers and services directories, perhaps the views directory and CSS directory is enough. But for now I will leave it like this and see how it goes.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var gulp = require('gulp');
</span><span class='line'>var browserSync = require('browser-sync').create();
</span><span class='line'>var reload = browserSync.reload;
</span><span class='line'>
</span><span class='line'>gulp.task('browser-sync', function() {
</span><span class='line'>  browserSync.init({
</span><span class='line'>      proxy: "localhost:8501/myproject"
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>  gulp.watch([
</span><span class='line'>      'controllers/*.cfc', 'services/*.cfc', 'views/**/*.cfm', 'dist/*.css'
</span><span class='line'>  ]).on("change", function() {
</span><span class='line'>      console.log("Watch hit");
</span><span class='line'>      browserSync.reload();
</span><span class='line'>  });
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>gulp.task('default', ['browser-sync']);</span></code></pre></td></tr></table></div></figure>


<p>Note carefully the syntax of gulp.watch() for multiple directories / files. It&rsquo;s an array of strings separated by commas. Note also that the root of the relative paths specified is where the gulpfile.js is located.</p>

<p>But wait, wouldn&rsquo;t it be better if I could use Browsersync to develop against both ACF and Lucee? Here&rsquo;s a solution that I have working that creates named instances of Browsersync so they don&rsquo;t step on each other:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var gulp = require('gulp');
</span><span class='line'>var bsacf = require('browser-sync').create('browserSyncACF');
</span><span class='line'>var bslucee = require('browser-sync').create('browserSyncLucee');
</span><span class='line'>
</span><span class='line'>gulp.task('browser-sync', function() {
</span><span class='line'>  bsacf.init({
</span><span class='line'>      proxy: "localhost:8501/myproject",
</span><span class='line'>      browser: "google chrome",
</span><span class='line'>      reloadOnRestart: true
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>  bslucee.init({
</span><span class='line'>      proxy: "localhost:8888/myproject",
</span><span class='line'>      browser: "vivaldi",
</span><span class='line'>      port: 3010,
</span><span class='line'>      reloadOnRestart: true,
</span><span class='line'>      ui: {
</span><span class='line'>          port: 3011
</span><span class='line'>      }
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>  gulp.watch([
</span><span class='line'>      'controllers/*.cfc', 'services/*.cfc', 'views/**/*.cfm', 'dist/*.css'
</span><span class='line'>  ]).on("change", function() {
</span><span class='line'>      console.log("Watch hit");
</span><span class='line'>      bsacf.reload();
</span><span class='line'>      bslucee.reload();
</span><span class='line'>  });
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>gulp.task('default', ['browser-sync']);</span></code></pre></td></tr></table></div></figure>


<p>I specify separate browsers for each so that ACF and Lucee sessions don&rsquo;t step on one another, and separate ports for the Lucee instance of Browsersync so they can coexist. The advantage to doing it this way is I can start both instances with a single <em>gulp</em> command on the command line. Unfortunately the ACF and Lucee instances of Browsersync will not mirror or ghost each other, so I will still have to click and enter test data on forms separately while developing, but this is still much better than needing to reload both browsers manually all the time.</p>

<h5>Update:</h5>

<p>I&rsquo;ve noticed one other feature of Browsersync that I wanted to see if I could get working - injecting modified CSS into the browser to avoid reloading the DOM. I&rsquo;ve now rearranged my gulpfile.js to be the following, adding a second gulp.watch() call to inject the minified bootstrap css directly into the browser, and removing the <em>dist</em> directory from the first gulp.watch() call so the browsers are not reloaded.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var gulp = require('gulp');
</span><span class='line'>var bsacf = require('browser-sync').create('browserSyncACF');
</span><span class='line'>var bslucee = require('browser-sync').create('browserSyncLucee');
</span><span class='line'>
</span><span class='line'>gulp.task('browser-sync', function() {
</span><span class='line'>  bsacf.init({
</span><span class='line'>      proxy: "localhost:8501/easycal",
</span><span class='line'>      browser: "google chrome",
</span><span class='line'>      reloadOnRestart: true
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>  bslucee.init({
</span><span class='line'>      proxy: "localhost:8888/easycal",
</span><span class='line'>      browser: "vivaldi",
</span><span class='line'>      port: 3010,
</span><span class='line'>      reloadOnRestart: true,
</span><span class='line'>      ui: {
</span><span class='line'>          port: 3011
</span><span class='line'>      }
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>  gulp.watch([
</span><span class='line'>      'controllers/*.cfc', 'services/*.cfc', 'views/**/*.cfm',
</span><span class='line'>      'layouts/**/*.cfm', 'dist/*.css', 'easycal-app.css'
</span><span class='line'>  ]).on("change", function() {
</span><span class='line'>      console.log("Watch hit");
</span><span class='line'>      bsacf.reload();
</span><span class='line'>      bslucee.reload();
</span><span class='line'>  });
</span><span class='line'>
</span><span class='line'>  gulp.watch([
</span><span class='line'>      'dist/toolkit.min.css'
</span><span class='line'>  ]).on("change", function() {
</span><span class='line'>      console.log("CSS hit");
</span><span class='line'>      return gulp.src(['dist/toolkit.min.css'])
</span><span class='line'>          .pipe(bsacf.stream())
</span><span class='line'>          .pipe(bslucee.stream());
</span><span class='line'>  });
</span><span class='line'>});
</span><span class='line'>
</span><span class='line'>gulp.task('default', ['browser-sync']);</span></code></pre></td></tr></table></div></figure>


<p>I like how this is shaping up now. :-)</p>

<p>Comments or suggestions welcome!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Nando @ Aria Media</span></span>

      




<time class='entry-date' datetime='2017-03-20T00:06:28+01:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2017</span></span> <span class='time'>12:06 am</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://dnando.github.io/blog/2017/03/20/hot-browser-reloading/" data-via="dnando" data-counturl="http://dnando.github.io/blog/2017/03/20/hot-browser-reloading/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2016/08/05/scale-attribute-is-essential-with-decimal-cfsqltype/" title="Previous Post: Scale Attribute is Essential with Decimal cfsqltype">&laquo; Scale Attribute is Essential with Decimal cfsqltype</a>
      
      
        <a class="basic-alignment right" href="/blog/2017/04/09/cfqueryparam-setting-for-sql-in-statements/" title="Next Post: Cfqueryparam setting for SQL IN statements">Cfqueryparam setting for SQL IN statements &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/04/09/cfqueryparam-setting-for-sql-in-statements/">Cfqueryparam Setting for SQL in Statements</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/20/hot-browser-reloading/">Hot Browser Reloading With Browsersync</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/08/05/scale-attribute-is-essential-with-decimal-cfsqltype/">Scale Attribute Is Essential With Decimal Cfsqltype</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/22/first-steps-with-the-clojure-version-of-fw-slash-1/">First Steps With the Clojure Version of FW/1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/01/generating-accurate-pdfs-using-cfdocument/">Generating Accurate PDFs Using Cfdocument</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dnando">@dnando</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dnando',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Nando @ Aria Media -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'nandoariamedia';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://dnando.github.io/blog/2017/03/20/hot-browser-reloading/';
        var disqus_url = 'http://dnando.github.io/blog/2017/03/20/hot-browser-reloading/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
